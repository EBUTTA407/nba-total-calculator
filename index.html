<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NBA Live Total Calculator</title>
  <p class="sub">
  Live pace + blended projection, whistle/FT flags, OT adjustment, hedge sizing, and snapshots.
  • <a href="nba_total_calc.py" download style="color:#6aa9ff;font-weight:700;">Download terminal script (Python)</a>
</p>

  <style>
    :root{
      --bg:#0b1220; --card:#121b2f; --muted:#9fb0d0; --text:#eaf0ff; --accent:#6aa9ff;
      --good:#3ddc97; --warn:#ffcc66; --bad:#ff6b6b;
      --border:rgba(255,255,255,.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:linear-gradient(180deg,#070b14, #0b1220 35%, #070b14);
      color:var(--text)
    }
    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    .top{display:flex;gap:14px;align-items:flex-end;justify-content:space-between;flex-wrap:wrap}
    h1{font-size:20px;margin:0 0 2px 0;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:12px;margin:0}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:14px;margin-top:14px}
    @media(max-width:920px){.grid{grid-template-columns:1fr}}
    .card{
      background:rgba(18,27,47,.85);
      border:1px solid var(--border);
      border-radius:16px;
      padding:14px;
      box-shadow:0 10px 26px rgba(0,0,0,.25)
    }
    .card h2{font-size:14px;margin:0 0 10px 0;color:#d9e5ff}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:520px){.row{grid-template-columns:1fr}}
    label{display:block;font-size:12px;color:var(--muted);margin:0 0 6px 2px}
    input,select{
      width:100%;
      padding:10px 11px;
      border-radius:12px;
      background:#0a1020;
      border:1px solid var(--border);
      color:var(--text);
      outline:none
    }
    input:focus,select:focus{
      border-color:rgba(106,169,255,.6);
      box-shadow:0 0 0 3px rgba(106,169,255,.18)
    }
    .tog{
      display:flex;align-items:center;gap:10px;
      padding:10px 11px;border-radius:12px;
      background:#0a1020;border:1px solid var(--border)
    }
    .tog input{width:18px;height:18px}
    .tog span{font-size:13px;color:#dce7ff}
    .btns{display:flex;gap:10px;flex-wrap:wrap}
    button{
      cursor:pointer;
      border:1px solid var(--border);
      background:linear-gradient(180deg,rgba(106,169,255,.22),rgba(106,169,255,.08));
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      font-weight:650
    }
    button:hover{border-color:rgba(106,169,255,.55)}
    button.secondary{background:rgba(255,255,255,.04)}
    button.danger{background:linear-gradient(180deg,rgba(255,107,107,.22),rgba(255,107,107,.08))}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      font-size:12px;color:var(--muted)
    }
    .pill b{color:var(--text)}
    .out{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:620px){.out{grid-template-columns:1fr}}
    .metric{
      padding:12px;border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03)
    }
    .metric .k{font-size:11px;color:var(--muted)}
    .metric .v{font-size:20px;font-weight:780;margin-top:4px}
    .metric .s{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.25}
    .lean{padding:14px;border-radius:16px;border:1px solid var(--border);background:rgba(255,255,255,.03)}
    .lean .big{font-size:22px;font-weight:900;letter-spacing:.3px}
    .lean.good{border-color:rgba(61,220,151,.35);box-shadow:0 0 0 3px rgba(61,220,151,.12) inset}
    .lean.warn{border-color:rgba(255,204,102,.35);box-shadow:0 0 0 3px rgba(255,204,102,.12) inset}
    .lean.bad{border-color:rgba(255,107,107,.35);box-shadow:0 0 0 3px rgba(255,107,107,.12) inset}
    .flags{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .flag{padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid var(--border);background:rgba(255,255,255,.03)}
    .flag.good{border-color:rgba(61,220,151,.35); color:var(--good)}
    .flag.warn{border-color:rgba(255,204,102,.35); color:var(--warn)}
    .flag.bad{border-color:rgba(255,107,107,.35); color:var(--bad)}
    .hr{height:1px;background:var(--border);margin:12px 0}
    .small{font-size:12px;color:var(--muted);line-height:1.35}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid var(--border);padding:8px 6px;font-size:12px;text-align:left;color:var(--muted)}
    th{color:#d9e5ff;font-weight:700}
    .right{text-align:right}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:820px){.two{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>NBA Live Total Points Calculator</h1>
        <p class="sub">Live pace + blended projection, whistle/FT flags, OT adjustment, hedge sizing, and snapshots.</p>
      </div>
      <div class="pill"><b id="stamp">—</b></div>
    </div>

    <div class="grid">
      <!-- INPUTS -->
      <div class="card">
        <h2>Live Inputs</h2>
        <div class="row">
          <div>
            <label>Quarter</label>
            <select id="q">
              <option value="1">1</option>
              <option value="2" selected>2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
          <div>
            <label>Time left in quarter (mm:ss)</label>
            <input id="tleft" value="7:10" placeholder="7:10" />
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <div>
            <div class="row" style="margin-top:10px">
  <div>
    <label>Home points</label>
    <input id="homePts" type="number" step="1" value="43" />
  </div>
  <div>
    <label>Away points</label>
    <input id="awayPts" type="number" step="1" value="37" />
  </div>
</div>

<div class="row" style="margin-top:10px">
  <div>
    <label>Computed total (auto)</label>
    <input id="pts" type="number" step="1" value="80" disabled />
  </div>
  <div>
    <label>Current live total (market)</label>
    <input id="live" type="number" step="0.5" value="224.5" />
  </div>
</div>

          
          </div>
          <div>
            <label>Current live total (market)</label>
            <input id="live" type="number" step="0.5" value="224.5" />
          </div>
        </div>

        <div class="hr"></div>

        <div class="row">
          <div>
            <label>Pregame total (baseline)</label>
            <input id="line" type="number" step="0.5" value="228.5" />
          </div>
          <div>
            <label>Edge threshold (pts) for bet lean</label>
            <input id="thr" type="number" step="0.5" value="4" />
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div>
            <label>Alpha (trust live pace) — auto if blank</label>
            <input id="alpha" type="number" step="0.05" placeholder="auto" />
          </div>
          <div>
            <label>Bonus/FT boost (pts per minute) if in bonus</label>
            <input id="bonusBoost" type="number" step="0.05" value="0.25" />
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div class="tog">
            <input id="bonus" type="checkbox" />
            <span>Both teams in bonus / frequent whistles right now</span>
          </div>
          <div class="tog">
            <input id="ftparade" type="checkbox" />
            <span>FT parade (intentional fouls / nonstop FTs)</span>
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div>
            <label>FTA so far (both teams) — optional</label>
            <input id="fta" type="number" step="1" placeholder="optional" />
          </div>
          <div>
            <label>3P% so far — optional (e.g., 0.42)</label>
            <input id="tpct" type="number" step="0.01" placeholder="optional" />
          </div>
        </div>

        <div class="hr"></div>

        <h2>Overtime Adjustment</h2>
        <div class="row">
          <div class="tog">
            <input id="ot" type="checkbox" />
            <span>Include OT risk in projection</span>
          </div>
          <div>
            <label>OT probability %</label>
            <input id="otp" type="number" step="0.5" value="6" />
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <div>
            <label>Expected OT points (combined)</label>
            <input id="otpts" type="number" step="1" value="10" />
          </div>
          <div class="tog">
            <input id="autoSnap" type="checkbox" />
            <span>Auto-snapshot on Calculate</span>
          </div>
        </div>

        <div class="hr"></div>

        <div class="btns">
          <button id="calc">Calculate</button>
          <button id="snap" class="secondary">Snapshot</button>
          <button id="reset" class="danger">Reset</button>
        </div>

        <p class="small" style="margin-top:10px">
          Tip: leave Alpha blank early game (auto). Toggle bonus/FT parade when refs start whistling.
        </p>
      </div>

      <!-- OUTPUTS -->
      <div class="card">
        <h2>Outputs</h2>
        <div class="out">
          <div class="metric">
            <div class="k">Elapsed minutes</div>
            <div class="v mono" id="elapsed">—</div>
            <div class="s" id="alphaUsed">Alpha: —</div>
          </div>
          <div class="metric">
            <div class="k">Current pace (pts/min)</div>
            <div class="v mono" id="ppm">—</div>
            <div class="s" id="needppm">Needed for market: —</div>
          </div>
          <div class="metric">
            <div class="k">Pace projection (no reversion)</div>
            <div class="v mono" id="paceProj">—</div>
            <div class="s">Pure pace extrapolation.</div>
          </div>
          <div class="metric">
            <div class="k">Blended projection (recommended)</div>
            <div class="v mono" id="blendProj">—</div>
            <div class="s" id="edge">Edge vs live: —</div>
          </div>
        </div>

        <div style="margin-top:10px" id="leanBox" class="lean warn">
          <div class="big" id="lean">—</div>
          <div class="small" id="why">—</div>
          <div class="flags" id="flags"></div>
        </div>

        <div class="hr"></div>

        <h2>Hedge Calculator (Totals)</h2>
        <div class="two">
          <div>
            <div class="row">
              <div>
                <label>My bet side</label>
                <select id="mySide">
                  <option value="UNDER" selected>UNDER</option>
                  <option value="OVER">OVER</option>
                </select>
              </div>
              <div>
                <label>My bet line</label>
                <input id="myLine" type="number" step="0.5" value="228.5" />
              </div>
            </div>
            <div class="row" style="margin-top:10px">
              <div>
                <label>My stake ($)</label>
                <input id="myStake" type="number" step="1" value="100" />
              </div>
              <div>
                <label>My odds (American)</label>
                <input id="myOdds" type="number" step="1" value="-110" />
              </div>
            </div>
          </div>

          <div>
            <div class="row">
              <div>
                <label>Hedge line (defaults to live total)</label>
                <input id="hedgeLine" type="number" step="0.5" placeholder="auto" />
              </div>
              <div>
                <label>Hedge odds (American)</label>
                <input id="hedgeOdds" type="number" step="1" value="-110" />
              </div>
            </div>
            <div class="row" style="margin-top:10px">
              <div>
                <label>Hedge suggestion</label>
                <input id="hedgeNow" disabled />
              </div>
              <div>
                <label>Recommended hedge stake ($)</label>
                <input id="hedgeStake" disabled />
              </div>
            </div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="small" id="hedgeExplain">Enter your ticket info to see an equalized hedge stake + middle range (if applicable).</div>

        <div class="hr"></div>

        <h2>Snapshots</h2>
        <div class="small">Saves the current state each time you hit Snapshot (or auto-snapshot on Calculate if enabled).</div>
        <div style="overflow:auto; margin-top:8px">
          <table id="log">
            <thead>
              <tr>
                <th>Time</th>
                <th class="right">Q</th>
                <th class="right">T Left</th>
                <th class="right">Pts</th>
                <th class="right">Live</th>
                <th class="right">Blend</th>
                <th class="right">Edge</th>
                <th>Lean</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <p class="small" style="margin-top:14px">
      Disclaimer: Math/pace decision support only; doesn’t know injuries/rotations/true market depth. Use responsibly.
    </p>
  </div>

<script>
  const $ = (id) => document.getElementById(id);
  const clamp = (x, a, b) => Math.max(a, Math.min(b, x));

  function nowStamp(){
    const d = new Date();
    return d.toLocaleString(undefined,{hour:'2-digit',minute:'2-digit',second:'2-digit',year:'numeric',month:'short',day:'2-digit'});
  }

  function parseMMSS(s){
    if(!s) return NaN;
    const m = String(s).trim().split(':');
    if(m.length!==2) return NaN;
    const mm = Number(m[0]);
    const ss = Number(m[1]);
    if(!Number.isFinite(mm) || !Number.isFinite(ss)) return NaN;
    return mm + ss/60;
  }

  function decFromAmerican(am){
    const a = Number(am);
    if(!Number.isFinite(a) || a === 0) return NaN;
    if(a < 0) return 1 + (100/Math.abs(a));
    return 1 + (a/100);
  }

  function autoAlpha(elapsed){
    return clamp(0.35 + 0.012*elapsed, 0.35, 0.90);
  }

  function fmt(x, d=1){
    if(!Number.isFinite(x)) return '—';
    return x.toFixed(d);
  }

  function compute(){
    const q = Number($('q').value);
    const tleft = $('tleft').value;
    const pts = Number($('pts').value);
    const live = Number($('live').value);
    const line = Number($('line').value);
    const thr = Number($('thr').value);

    const tleftMin = parseMMSS(tleft);
    const elapsed = (q-1)*12 + (12 - tleftMin);

    const valid = (Number.isFinite(elapsed) && elapsed > 0 && elapsed <= 48 && Number.isFinite(pts) && pts >= 0);

    let alpha = Number($('alpha').value);
    const alphaIsManual = Number.isFinite(alpha);
    if(!alphaIsManual) alpha = autoAlpha(elapsed);
    alpha = clamp(alpha, 0.05, 0.95);

    const bonus = $('bonus').checked;
    const ftparade = $('ftparade').checked;
    const bonusBoost = Number($('bonusBoost').value);
    const boost = (bonus ? (Number.isFinite(bonusBoost)? bonusBoost : 0.25) : 0) + (ftparade ? 0.35 : 0);

    const ppm = valid ? pts/elapsed : NaN;
    const paceProj = valid ? ppm*48 : NaN;

    const baselineRate = (Number.isFinite(line) && line>0) ? line/48 : NaN;
    const blendedRate = (Number.isFinite(baselineRate) && valid) ? (alpha*(ppm + boost) + (1-alpha)*baselineRate) : NaN;
    const blendProjRaw = (Number.isFinite(blendedRate) && valid) ? pts + blendedRate*(48 - elapsed) : NaN;

    const otOn = $('ot').checked;
    const otp = Number($('otp').value);
    const otpts = Number($('otpts').value);
    const otAdj = (otOn && Number.isFinite(otp) && Number.isFinite(otpts)) ? (otp/100)*otpts : 0;
    const blendProj = Number.isFinite(blendProjRaw) ? (blendProjRaw + otAdj) : NaN;

    const needPPM = (Number.isFinite(live) && valid) ? ((live - pts) / (48 - elapsed)) : NaN;
    const edge = (Number.isFinite(blendProj) && Number.isFinite(live)) ? (blendProj - live) : NaN;

    const flags = [];

    if(bonus && (q <= 3) && Number.isFinite(tleftMin) && tleftMin > 6){
      flags.push({t:'Early bonus = foul risk', c:'bad'});
    } else if(bonus){
      flags.push({t:'Bonus/whistles on', c:'warn'});
    }
    if(ftparade) flags.push({t:'FT parade', c:'bad'});

    const fta = Number($('fta').value);
    if(Number.isFinite(fta) && valid){
      const ftaPerMin = fta/elapsed;
      if(ftaPerMin >= 1.1) flags.push({t:`High FT rate (${fmt(ftaPerMin,2)}/min)`, c:'bad'});
      else if(ftaPerMin >= 0.85) flags.push({t:`FT rate elevated (${fmt(ftaPerMin,2)}/min)`, c:'warn'});
      else flags.push({t:`FT rate ok (${fmt(ftaPerMin,2)}/min)`, c:'good'});
    }

    const tpct = Number($('tpct').value);
    if(Number.isFinite(tpct)){
      if(tpct >= 0.42) flags.push({t:`3P% hot (${fmt(tpct*100,1)}%)`, c:'warn'});
      else if(tpct <= 0.31) flags.push({t:`3P% cold (${fmt(tpct*100,1)}%)`, c:'warn'});
      else flags.push({t:`3P% normal (${fmt(tpct*100,1)}%)`, c:'good'});
    }

    if(otOn) flags.push({t:`OT adj +${fmt(otAdj,1)} pts`, c:'warn'});

    let lean = 'PASS / WAIT';
    let leanClass = 'warn';
    let why = 'Enter valid game state inputs.';

    if(Number.isFinite(edge) && Number.isFinite(thr)){
      if(edge >= thr){
        lean = 'LEAN: OVER';
        leanClass = 'good';
        why = `Model proj ${fmt(blendProj,1)} is +${fmt(edge,1)} vs live ${fmt(live,1)} (≥ ${fmt(thr,1)} edge).`;
      } else if(edge <= -thr){
        lean = 'LEAN: UNDER';
        leanClass = 'good';
        why = `Model proj ${fmt(blendProj,1)} is ${fmt(edge,1)} vs live ${fmt(live,1)} (≤ -${fmt(thr,1)} edge).`;
      } else {
        lean = 'PASS / WAIT';
        leanClass = 'warn';
        why = `Edge ${fmt(edge,1)} is inside your threshold (±${fmt(thr,1)}).`;
      }

      const badCount = flags.filter(f=>f.c==='bad').length;
      if(badCount >= 2){
        leanClass = 'bad';
        why += ' Warning: multiple high-risk flags (refs/FT/pace volatility).';
      } else if(badCount === 1 && leanClass === 'good'){
        leanClass = 'warn';
        why += ' Note: one high-risk flag could swing totals fast.';
      }
    }

    $('stamp').textContent = nowStamp();
    $('elapsed').textContent = valid ? `${fmt(elapsed,2)} min` : '—';
    $('alphaUsed').textContent = `Alpha used: ${fmt(alpha,2)}${alphaIsManual ? ' (manual)' : ' (auto)'}`;
    $('ppm').textContent = valid ? `${fmt(ppm,2)}` : '—';
    $('needppm').textContent = Number.isFinite(needPPM) ? `Needed for live ${fmt(live,1)}: ${fmt(needPPM,2)} pts/min` : 'Needed for market: —';
    $('paceProj').textContent = Number.isFinite(paceProj) ? `${fmt(paceProj,1)}` : '—';
    $('blendProj').textContent = Number.isFinite(blendProj) ? `${fmt(blendProj,1)}` : '—';
    $('edge').textContent = Number.isFinite(edge) ? `Edge vs live: ${fmt(edge,1)} pts` : 'Edge vs live: —';

    const lb = $('leanBox');
    lb.classList.remove('good','warn','bad');
    lb.classList.add(leanClass);
    $('lean').textContent = lean;
    $('why').textContent = why;

    const flagsEl = $('flags');
    flagsEl.innerHTML = '';
    if(flags.length===0){
      const d = document.createElement('div');
      d.className = 'flag';
      d.textContent = 'No extra flags.';
      flagsEl.appendChild(d);
    } else {
      flags.forEach(f=>{
        const d = document.createElement('div');
        d.className = `flag ${f.c}`;
        d.textContent = f.t;
        flagsEl.appendChild(d);
      });
    }

    hedgeCalc({liveTotal: live, flags});

    if($('autoSnap').checked){
      snapshot({q, tleft, pts, live, blendProj, edge, lean});
    }

    return {q, tleft, pts, live, blendProj, edge, lean};
  }

  function snapshot(state){
    const tbody = $('log').querySelector('tbody');
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="mono">${nowStamp()}</td>
      <td class="right">${state.q}</td>
      <td class="right mono">${state.tleft}</td>
      <td class="right mono">${state.pts}</td>
      <td class="right mono">${fmt(state.live,1)}</td>
      <td class="right mono">${fmt(state.blendProj,1)}</td>
      <td class="right mono">${fmt(state.edge,1)}</td>
      <td>${state.lean}</td>
    `;
    tbody.prepend(tr);
  }

  function hedgeCalc(ctx){
    const liveTotal = Number.isFinite(ctx?.liveTotal) ? ctx.liveTotal : Number($('live').value);

    const mySide = $('mySide').value;
    const myLine = Number($('myLine').value);
    const myStake = Number($('myStake').value);
    const myOdds = Number($('myOdds').value);

    let hLine = Number($('hedgeLine').value);
    if(!Number.isFinite(hLine)) hLine = liveTotal;

    const hOdds = Number($('hedgeOdds').value);

    const dec0 = decFromAmerican(myOdds);
    const decH = decFromAmerican(hOdds);

    let suggestion = '—';
    let hStake = NaN;
    let explain = '';

    const clv = (mySide === 'UNDER') ? (myLine - liveTotal) : (liveTotal - myLine);

    const badFlags = (ctx?.flags || []).filter(f=>f.c==='bad').length;
    const warnFlags = (ctx?.flags || []).filter(f=>f.c==='warn').length;

    if(Number.isFinite(clv) && clv >= 6 && (badFlags>=1 || warnFlags>=2)){
      suggestion = 'Consider SMALL hedge';
    } else if(Number.isFinite(clv) && clv >= 6){
      suggestion = 'Hold (good CLV)';
    } else if(Number.isFinite(clv) && clv >= 3 && badFlags>=1){
      suggestion = 'Watch closely (foul/FT risk)';
    } else {
      suggestion = 'No hedge signal';
    }

    if(Number.isFinite(dec0) && Number.isFinite(decH) && Number.isFinite(myStake) && myStake>0){
      hStake = myStake * dec0 / decH;

      let middle = '';
      if(mySide === 'UNDER'){
        if(Number.isFinite(myLine) && Number.isFinite(hLine) && hLine < myLine){
          middle = `Middle range (both win): ${fmt(hLine,1)} to ${fmt(myLine,1)} (excluding pushes).`;
        } else {
          middle = `Hedge reduces variance, but no classic middle (hedge line not below your under line).`;
        }
      } else {
        if(Number.isFinite(myLine) && Number.isFinite(hLine) && hLine > myLine){
          middle = `Middle range (both win): ${fmt(myLine,1)} to ${fmt(hLine,1)} (excluding pushes).`;
        } else {
          middle = `Hedge reduces variance, but no classic middle (hedge line not above your over line).`;
        }
      }

      const win0 = myStake*(dec0-1);
      const lose0 = -myStake;
      const winH = hStake*(decH-1);
      const loseH = -hStake;

      const worst = Math.min(win0 + loseH, lose0 + winH);
      const best = win0 + winH;

      explain = `Equalized hedge stake ≈ $${fmt(hStake,2)} (assumes opposite-side hedge at ${fmt(hLine,1)}).\n` +
                `${middle}\n` +
                `Approx worst-case profit (ignoring pushes): $${fmt(worst,2)}. Best-case (middle hits): $${fmt(best,2)}.`;
    } else {
      explain = 'Enter valid stake and American odds to compute hedge sizing.';
    }

    $('hedgeNow').value = suggestion;
    $('hedgeStake').value = Number.isFinite(hStake) ? fmt(hStake,2) : '—';
    $('hedgeExplain').textContent = explain;
  }

  function resetAll(){
    $('q').value = '1';
    $('tleft').value = '12:00';
    $('pts').value = '0';
    $('live').value = '0';
    $('line').value = '0';
    $('thr').value = '4';
    $('alpha').value = '';
    $('bonusBoost').value = '0.25';
    $('bonus').checked = false;
    $('ftparade').checked = false;
    $('fta').value = '';
    $('tpct').value = '';
    $('ot').checked = false;
    $('otp').value = '6';
    $('otpts').value = '10';
    $('autoSnap').checked = false;

    $('mySide').value = 'UNDER';
    $('myLine').value = '228.5';
    $('myStake').value = '100';
    $('myOdds').value = '-110';
    $('hedgeLine').value = '';
    $('hedgeOdds').value = '-110';

    $('log').querySelector('tbody').innerHTML = '';
    compute();
  }

  $('calc').addEventListener('click', () => compute());
  $('snap').addEventListener('click', () => {
    const s = compute();
    snapshot(s);
  });
  $('reset').addEventListener('click', () => resetAll());

  [
    'q','tleft','pts','live','line','thr','alpha','bonusBoost','bonus','ftparade','fta','tpct','ot','otp','otpts',
    'mySide','myLine','myStake','myOdds','hedgeLine','hedgeOdds'
  ].forEach(id=>{
    $(id).addEventListener('input', () => compute());
    $(id).addEventListener('change', () => compute());
  });

  $('stamp').textContent = nowStamp();
  compute();
</script>
</body>
</html>

